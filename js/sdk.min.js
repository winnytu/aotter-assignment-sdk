var AdInfo={},EventSuccess=document.createEvent("Event");EventSuccess.initEvent("on-ad-loaded");var EventFailed=document.createEvent("Event");EventFailed.initEvent("on-ad-failed");var EventImpressionSuccess=document.createEvent("Event");EventImpressionSuccess.initEvent("get-ad-impression");var EventImpressionSend=document.createEvent("Event");EventImpressionSend.initEvent("on-ad-impression"),GetAd=function(){const a=new XMLHttpRequest;a.open("GET","http://localhost:3000/ads"),a.onload=function(){if(200===a.status){let b=JSON.parse(a.responseText);PreSetAd(b),b.success?window.dispatchEvent(EventSuccess):window.dispatchEvent(EventFailed)}else console.log(a.status)},a.send("null")},PreSetAd=function(a){return this.AdInfo=a},SetAd=function(a,b){const c=`
        <div id="#AdLoaded" style="width:100%;background-color:#e5e5e5;border:1px solid #ccc">
        <a style="text-decoration:none;color:#000;font-weight:600" href="${AdInfo.url}">
            <img style="width:100%" src="${AdInfo.image}" alt="">
            <div class="title" style="padding:10px;text-decoration:none">
            <div style="color:#828282;padding-bottom:3px">AGIRLS.AOTTER.NET</div>${AdInfo.title}</div>
        </a>
        </div>`,d=`
        <div id="#AdLoaded" style="position: relative;padding-bottom: 56.25%;padding-top: 30px;height: 0;overflow: hidden;">
        <iframe style="position: absolute;top: 0;left: 0;"src="${AdInfo.video_url}" width="100%" height="100%" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
        </div>`;AdInfo.type===b&&("BANNER"===b?document.querySelector(a).innerHTML=c:document.querySelector(a).innerHTML=d);setInterval(AdImpression,100,a)},AdImpression=function(a){const b=document.querySelector(a).offsetTop,c=document.querySelector(a).offsetHeight,d=window.innerHeight;window.scrollY+d-b>.5*c&&setTimeout(()=>{window.dispatchEvent(EventImpressionSuccess)},1e3)},SendImpression=function(){var a=AdInfo.impression_url,b=new XMLHttpRequest;b.open("post",a),b.setRequestHeader("Content-type"," application/json"),b.onload=function(){200===b.status?console.log(b.responseText):console.log(b.status)},b.send(AdInfo),window.dispatchEvent(EventImpressionSend)},window.addEventListener("get-ad-impression",SendImpression,{once:!0});